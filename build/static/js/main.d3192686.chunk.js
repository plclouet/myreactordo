(this.webpackJsonpmyreactordo2=this.webpackJsonpmyreactordo2||[]).push([[0],{41:function(e,t,a){e.exports=a(73)},46:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(37),l=a.n(r),s=(a(46),a(3)),o=a(6),c=function(){return i.a.createElement("div",{className:"center"},i.a.createElement("img",{src:"http://assets.pokemon.com/assets/cms2/img/pokedex/full/035.png",alt:"Page non trouv\xe9e"}),i.a.createElement("h1",null,"Hey, cette page n'existe pas !"),i.a.createElement(s.b,{to:"/",className:"waves-effect waves-teal btn-flat"},"Retourner \xe0 l'accueil"))},d=a(15),u=a.n(d),m=a(17),f=a(4),v=a(5),h=a(9),p=a(8),g=a(18),b=a.n(g),E=a(11),y=(a(70),function(e){var t=e.ordonnance,a=e.borderColor,r=void 0===a?"#009688":a,l=Object(n.useState)(),s=Object(E.a)(l,2),c=s[0],d=s[1],u=Object(o.g)();return t.imageOrdo?i.a.createElement("div",{className:"col s12 m6 l4",onMouseEnter:function(){d(r)},onMouseLeave:function(){d("#f5f5f5")},onClick:function(){return e=t.id,void u.push("/ordonnances/".concat(e));var e}},i.a.createElement("div",{className:"card",style:{borderColor:c}},i.a.createElement("div",{className:"card-image"},i.a.createElement("img",{src:"".concat(t.imageOrdo.url),alt:t.lastName,height:"300"})),i.a.createElement("div",{className:"card-content"},i.a.createElement("p",null,t.lastName)))):null}),O=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={ordonnances:[],error:null},e.componentDidMount=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("https://frozen-dawn-43758.herokuapp.com/ordonnances");case 3:a=t.sent,e.setState({ordonnances:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.setState({error:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.ordonnances;return t?i.a.createElement("div",null,"An error occured: ",t.message):i.a.createElement("div",null,i.a.createElement("h1",{className:"center"},"Ordonnances"),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},a.map((function(e){return i.a.createElement(y,{key:e.id,ordonnance:e})})))),i.a.createElement(s.b,{className:"btn-floating btn-large waves-effect waves-light red z-depth-3",style:{position:"fixed",bottom:"25px",right:"25px"},to:"/ordonnance/add"},i.a.createElement("i",{className:"material-icons"},"add")))}}]),a}(i.a.Component),w=a(39),k=a.n(w),j=function(){return i.a.createElement("div",{className:"preloader-wrapper big active"},i.a.createElement("div",{className:"spinner-layer spinner-blue"},i.a.createElement("div",{className:"circle-clipper left"},i.a.createElement("div",{className:"circle"})),i.a.createElement("div",{className:"gap-patch"},i.a.createElement("div",{className:"circle"})),i.a.createElement("div",{className:"circle-clipper right"},i.a.createElement("div",{className:"circle"}))))},N=a(40),x=a.n(N),C=a(26),I=a.n(C),S=function(e){var t=e.match,a=Object(n.useState)(),r=Object(E.a)(a,2),l=r[0],c=r[1],d=Object(o.g)();Object(n.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()("https://frozen-dawn-43758.herokuapp.com/ordonnances/".concat(+t.params.id));case 2:a=e.sent,c(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.params.id]);return i.a.createElement("div",null,l?i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col s12 m8 offset-m2"},i.a.createElement("h2",{className:"header center"},l.lastName),i.a.createElement("div",{className:"card hoverable"},i.a.createElement("div",{id:"printMe",className:"card-image"},i.a.createElement("img",{id:"saveMe",src:"".concat(l.imageOrdo.url),alt:l.lastName,style:{width:"250px",margin:"0 auto"}})),i.a.createElement("div",{className:"card-stacked"},i.a.createElement("div",{className:"card-content"},i.a.createElement("p",null,l.firstName," ",l.lastName," ",l.examen),i.a.createElement("br",null),i.a.createElement("p",null,i.a.createElement("span",{style:{marginRight:5},className:"btn-floating  waves-effect  waves-light"},i.a.createElement("i",{onClick:function(){k()("https://frozen-dawn-43758.herokuapp.com".concat(l.imageOrdo.url),"image")},className:"material-icons "},"print")),i.a.createElement("span",{style:{marginRight:5},className:"btn-floating  waves-effect waves-light"},i.a.createElement("i",{onClick:function(){var e,t;e="https://frozen-dawn-43758.herokuapp.com".concat(l.imageOrdo.url),t="".concat(l.firstName).concat(l.lastName,".jpg"),b.a.get(e,{responseType:"blob"}).then((function(e){x()(e.data,t)}))},class:"material-icons"},"arrow_circle_down"))),i.a.createElement("p",null,i.a.createElement("span",{className:"btn-floating halfway-fab waves-effect waves-light",style:{position:"fixed",bottom:"25px",right:"25px"}},i.a.createElement("i",{onClick:function(){I.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&I.a.fire("Deleted!","Your file has been deleted.","success").then((function(e){b.a.delete("https://frozen-dawn-43758.herokuapp.com/ordonnances/".concat(l.id)).then((function(){return d.push("/ordonnances")}))}))}))},className:"material-icons"},"delete")))),i.a.createElement("div",{className:"card-action"},i.a.createElement(s.b,{to:"/"},"Retour")))))):i.a.createElement("h4",{className:"center"},i.a.createElement(j,null)))},A=a(21);a(71);function V(e,t){var a=Array.isArray(t)?t:[t],n=e;return a.forEach((function(e){n=n.replace("%s",e)})),n}function F(e,t){if("function"===typeof e)return e.apply(this,t);if("string"===typeof e){var a=e;"()"===a.substring(a.length-2)&&(a=a.substring(0,a.length-2));var n,i=a.split("."),r=i.pop(),l=window,s=Object(A.a)(i);try{for(s.s();!(n=s.n()).done;){l=l[n.value]}}catch(o){s.e(o)}finally{s.f()}return"undefined"===typeof l[r]?null:l[r].apply(this,t)}}var H={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DANKORT:{length:[16],prefix:["5019"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},ELO:{length:[16],prefix:["4011","4312","4389","4514","4573","4576","5041","5066","5067","509","6277","6362","6363","650","6516","6550"]},FORBRUGSFORENINGEN:{length:[16],prefix:["600722"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","5868","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]},VISA_ELECTRON:{length:[16],prefix:["4026","417500","4405","4508","4844","4913","4917"]}};function L(e,t){return new Promise((function(a,n){var i,r=Object.assign({},{crossDomain:!1,headers:{},method:"GET",params:{}},t),l=Object.keys(r.params).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r.params[e]))})).join("&"),s=e.indexOf("?"),o="GET"===r.method?"".concat(e).concat(s?"?":"&").concat(l):e;if(r.crossDomain){var c=document.createElement("script"),d="___fetch".concat(Date.now(),"___");window[d]=function(e){delete window[d],a(e)},c.src="".concat(o).concat(s?"&":"?","callback=").concat(d),c.async=!0,c.addEventListener("load",(function(){c.parentNode.removeChild(c)})),c.addEventListener("error",(function(){return n})),document.head.appendChild(c)}else{var u=new XMLHttpRequest;u.open(r.method,o),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===r.method&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Object.keys(r.headers).forEach((function(e){return u.setRequestHeader(e,r.headers[e])})),u.addEventListener("load",(function(){a(JSON.parse(this.responseText))})),u.addEventListener("error",(function(){return n})),u.send((i=r.params,Object.keys(i).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(i[e]))})).join("&")))}}))}var M={between:function(){var e=function(e){return parseFloat("".concat(e).replace(",","."))};return{validate:function(t){var a=t.value;if(""===a)return{valid:!0};var n=Object.assign({},{inclusive:!0,message:""},t.options),i=e(n.min),r=e(n.max);return n.inclusive?{message:V(t.l10n?n.message||t.l10n.between.default:n.message,["".concat(i),"".concat(r)]),valid:parseFloat(a)>=i&&parseFloat(a)<=r}:{message:V(t.l10n?n.message||t.l10n.between.notInclusive:n.message,["".concat(i),"".concat(r)]),valid:parseFloat(a)>i&&parseFloat(a)<r}}}},blank:function(){return{validate:function(e){return{valid:!0}}}},callback:function(){return{validate:function(e){var t=F(e.options.callback,[e]);return"boolean"===typeof t?{valid:t}:t}}},choice:function(){return{validate:function(e){var t="select"===e.element.tagName.toLowerCase()?e.element.querySelectorAll("option:checked").length:e.elements.filter((function(e){return e.checked})).length,a=e.options.min?"".concat(e.options.min):"",n=e.options.max?"".concat(e.options.max):"",i=e.l10n?e.options.message||e.l10n.choice.default:e.options.message,r=!(a&&t<parseInt(a,10)||n&&t>parseInt(n,10));switch(!0){case!!a&&!!n:i=V(e.l10n?e.l10n.choice.between:e.options.message,[a,n]);break;case!!a:i=V(e.l10n?e.l10n.choice.more:e.options.message,a);break;case!!n:i=V(e.l10n?e.l10n.choice.less:e.options.message,n)}return{message:i,valid:r}}}},creditCard:function(){return{validate:function(e){if(""===e.value)return{meta:{type:null},valid:!0};if(/[^0-9-\s]+/.test(e.value))return{meta:{type:null},valid:!1};var t=e.value.replace(/\D/g,"");if(!function(e){for(var t=e.length,a=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],n=0,i=0;t--;)i+=a[n][parseInt(e.charAt(t),10)],n=1-n;return i%10===0&&i>0}(t))return{meta:{type:null},valid:!1};for(var a=0,n=Object.keys(H);a<n.length;a++){var i=n[a];for(var r in H[i].prefix)if(e.value.substr(0,H[i].prefix[r].length)===H[i].prefix[r]&&-1!==H[i].length.indexOf(t.length))return{meta:{type:i},valid:!0}}return{meta:{type:null},valid:!1}}}},date:function(){var e=function(e,t,a){var n=t.indexOf("YYYY"),i=t.indexOf("MM"),r=t.indexOf("DD");if(-1===n||-1===i||-1===r)return null;var l=e.split(" "),s=l[0].split(a);if(s.length<3)return null;var o=new Date(parseInt(s[n],10),parseInt(s[i],10)-1,parseInt(s[r],10));if(l.length>1){var c=l[1].split(":");o.setHours(c.length>0?parseInt(c[0],10):0),o.setMinutes(c.length>1?parseInt(c[1],10):0),o.setSeconds(c.length>2?parseInt(c[2],10):0)}return o},t=function(e,t){var a=t.replace(/Y/g,"y").replace(/M/g,"m").replace(/D/g,"d").replace(/:m/g,":M").replace(/:mm/g,":MM").replace(/:S/,":s").replace(/:SS/,":ss"),n=e.getDate(),i=n<10?"0".concat(n):n,r=e.getMonth()+1,l=r<10?"0".concat(r):r,s="".concat(e.getFullYear()).substr(2),o=e.getFullYear(),c=e.getHours()%12||12,d=c<10?"0".concat(c):c,u=e.getHours(),m=u<10?"0".concat(u):u,f=e.getMinutes(),v=f<10?"0".concat(f):f,h=e.getSeconds(),p=h<10?"0".concat(h):h,g={H:"".concat(u),HH:"".concat(m),M:"".concat(f),MM:"".concat(v),d:"".concat(n),dd:"".concat(i),h:"".concat(c),hh:"".concat(d),m:"".concat(r),mm:"".concat(l),s:"".concat(h),ss:"".concat(p),yy:"".concat(s),yyyy:"".concat(o)};return a.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g,(function(e){return g[e]?g[e]:e.slice(1,e.length-1)}))};return{validate:function(a){if(""===a.value)return{meta:{date:null},valid:!0};var n=Object.assign({},{format:a.element&&"date"===a.element.getAttribute("type")?"YYYY-MM-DD":"MM/DD/YYYY",message:""},a.options),i=a.l10n?a.l10n.date.default:n.message,r={message:"".concat(i),meta:{date:null},valid:!1},l=n.format.split(" "),s=l.length>1?l[1]:null,o=l.length>2?l[2]:null,c=a.value.split(" "),d=c[0],u=c.length>1?c[1]:null;if(l.length!==c.length)return r;var m=n.separator||(-1!==d.indexOf("/")?"/":-1!==d.indexOf("-")?"-":-1!==d.indexOf(".")?".":"/");if(null===m||-1===d.indexOf(m))return r;var f=d.split(m),v=l[0].split(m);if(f.length!==v.length)return r;var h=f[v.indexOf("YYYY")],p=f[v.indexOf("MM")],g=f[v.indexOf("DD")];if(!/^\d+$/.test(h)||!/^\d+$/.test(p)||!/^\d+$/.test(g)||h.length>4||p.length>2||g.length>2)return r;var b=parseInt(h,10),E=parseInt(p,10),y=parseInt(g,10);if(!function(e,t,a,n){if(isNaN(e)||isNaN(t)||isNaN(a))return!1;if(e<1e3||e>9999||t<=0||t>12)return!1;if(a<=0||a>[31,e%400===0||e%100!==0&&e%4===0?29:28,31,30,31,30,31,31,30,31,30,31][t-1])return!1;if(!0===n){var i=new Date,r=i.getFullYear(),l=i.getMonth(),s=i.getDate();return e<r||e===r&&t-1<l||e===r&&t-1===l&&a<s}return!0}(b,E,y))return r;var O=new Date(b,E-1,y);if(s){var w=u.split(":");if(s.split(":").length!==w.length)return r;var k=w.length>0?w[0].length<=2&&/^\d+$/.test(w[0])?parseInt(w[0],10):-1:0,j=w.length>1?w[1].length<=2&&/^\d+$/.test(w[1])?parseInt(w[1],10):-1:0,N=w.length>2?w[2].length<=2&&/^\d+$/.test(w[2])?parseInt(w[2],10):-1:0;if(-1===k||-1===j||-1===N)return r;if(N<0||N>60)return r;if(k<0||k>=24||o&&k>12)return r;if(j<0||j>59)return r;O.setHours(k),O.setMinutes(j),O.setSeconds(N)}var x="function"===typeof n.min?n.min():n.min,C=x instanceof Date?x:x?e(x,v,m):O,I="function"===typeof n.max?n.max():n.max,S=I instanceof Date?I:I?e(I,v,m):O,A=x instanceof Date?t(C,n.format):x,F=I instanceof Date?t(S,n.format):I;switch(!0){case!!A&&!F:return{message:V(a.l10n?a.l10n.date.min:i,A),meta:{date:O},valid:O.getTime()>=C.getTime()};case!!F&&!A:return{message:V(a.l10n?a.l10n.date.max:i,F),meta:{date:O},valid:O.getTime()<=S.getTime()};case!!F&&!!A:return{message:V(a.l10n?a.l10n.date.range:i,[A,F]),meta:{date:O},valid:O.getTime()<=S.getTime()&&O.getTime()>=C.getTime()};default:return{message:"".concat(i),meta:{date:O},valid:!0}}}}},different:function(){return{validate:function(e){var t="function"===typeof e.options.compare?e.options.compare.call(this):e.options.compare;return{valid:""===t||e.value!==t}}}},digits:function(){return{validate:function(e){return{valid:""===e.value||/^\d+$/.test(e.value)}}}},emailAddress:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{multiple:!1,separator:/[,;]/},e.options),a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(!0===t.multiple||"true"==="".concat(t.multiple)){for(var n=t.separator||/[,;]/,i=function(e,t){for(var a=e.split(/"/),n=a.length,i=[],r="",l=0;l<n;l++)if(l%2===0){var s=a[l].split(t),o=s.length;if(1===o)r+=s[0];else{i.push(r+s[0]);for(var c=1;c<o-1;c++)i.push(s[c]);r=s[o-1]}}else r+='"'+a[l],l<n-1&&(r+='"');return i.push(r),i}(e.value,n),r=i.length,l=0;l<r;l++)if(!a.test(i[l]))return{valid:!1};return{valid:!0}}return{valid:a.test(e.value)}}}},file:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t,a=e.options.extension?e.options.extension.toLowerCase().split(","):null,n=e.options.type?e.options.type.toLowerCase().split(","):null;if(window.File&&window.FileList&&window.FileReader){var i=e.element.files,r=i.length,l=0;if(e.options.maxFiles&&r>parseInt("".concat(e.options.maxFiles),10))return{meta:{error:"INVALID_MAX_FILES"},valid:!1};if(e.options.minFiles&&r<parseInt("".concat(e.options.minFiles),10))return{meta:{error:"INVALID_MIN_FILES"},valid:!1};for(var s={},o=0;o<r;o++){if(l+=i[o].size,s={ext:t=i[o].name.substr(i[o].name.lastIndexOf(".")+1),file:i[o],size:i[o].size,type:i[o].type},e.options.minSize&&i[o].size<parseInt("".concat(e.options.minSize),10))return{meta:Object.assign({},{error:"INVALID_MIN_SIZE"},s),valid:!1};if(e.options.maxSize&&i[o].size>parseInt("".concat(e.options.maxSize),10))return{meta:Object.assign({},{error:"INVALID_MAX_SIZE"},s),valid:!1};if(a&&-1===a.indexOf(t.toLowerCase()))return{meta:Object.assign({},{error:"INVALID_EXTENSION"},s),valid:!1};if(i[o].type&&n&&-1===n.indexOf(i[o].type.toLowerCase()))return{meta:Object.assign({},{error:"INVALID_TYPE"},s),valid:!1}}if(e.options.maxTotalSize&&l>parseInt("".concat(e.options.maxTotalSize),10))return{meta:Object.assign({},{error:"INVALID_MAX_TOTAL_SIZE",totalSize:l},s),valid:!1};if(e.options.minTotalSize&&l<parseInt("".concat(e.options.minTotalSize),10))return{meta:Object.assign({},{error:"INVALID_MIN_TOTAL_SIZE",totalSize:l},s),valid:!1}}else if(t=e.value.substr(e.value.lastIndexOf(".")+1),a&&-1===a.indexOf(t.toLowerCase()))return{meta:{error:"INVALID_EXTENSION",ext:t},valid:!1};return{valid:!0}}}},greaterThan:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{inclusive:!0,message:""},e.options),a=parseFloat("".concat(t.min).replace(",","."));return t.inclusive?{message:V(e.l10n?t.message||e.l10n.greaterThan.default:t.message,"".concat(a)),valid:parseFloat(e.value)>=a}:{message:V(e.l10n?t.message||e.l10n.greaterThan.notInclusive:t.message,"".concat(a)),valid:parseFloat(e.value)>a}}}},identical:function(){return{validate:function(e){var t="function"===typeof e.options.compare?e.options.compare.call(this):e.options.compare;return{valid:""===t||e.value===t}}}},integer:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},e.options),a="."===t.decimalSeparator?"\\.":t.decimalSeparator,n="."===t.thousandsSeparator?"\\.":t.thousandsSeparator,i=new RegExp("^-?[0-9]{1,3}(".concat(n,"[0-9]{3})*(").concat(a,"[0-9]+)?$")),r=new RegExp(n,"g"),l="".concat(e.value);if(!i.test(l))return{valid:!1};n&&(l=l.replace(r,"")),a&&(l=l.replace(a,"."));var s=parseFloat(l);return{valid:!isNaN(s)&&isFinite(s)&&Math.floor(s)===s}}}},ip:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{ipv4:!0,ipv6:!0},e.options),a=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\/([0-9]|[1-2][0-9]|3[0-2]))?$/,n=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*(\/(\d|\d\d|1[0-1]\d|12[0-8]))?$/;switch(!0){case t.ipv4&&!t.ipv6:return{message:e.l10n?t.message||e.l10n.ip.ipv4:t.message,valid:a.test(e.value)};case!t.ipv4&&t.ipv6:return{message:e.l10n?t.message||e.l10n.ip.ipv6:t.message,valid:n.test(e.value)};case t.ipv4&&t.ipv6:default:return{message:e.l10n?t.message||e.l10n.ip.default:t.message,valid:a.test(e.value)||n.test(e.value)}}}}},lessThan:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{inclusive:!0,message:""},e.options),a=parseFloat("".concat(t.max).replace(",","."));return t.inclusive?{message:V(e.l10n?t.message||e.l10n.lessThan.default:t.message,"".concat(a)),valid:parseFloat(e.value)<=a}:{message:V(e.l10n?t.message||e.l10n.lessThan.notInclusive:t.message,"".concat(a)),valid:parseFloat(e.value)<a}}}},notEmpty:function(){return{validate:function(e){return{valid:""!==e.value}}}},numeric:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},e.options),a="".concat(e.value);a.substr(0,1)===t.decimalSeparator?a="0".concat(t.decimalSeparator).concat(a.substr(1)):a.substr(0,2)==="-".concat(t.decimalSeparator)&&(a="-0".concat(t.decimalSeparator).concat(a.substr(2)));var n="."===t.decimalSeparator?"\\.":t.decimalSeparator,i="."===t.thousandsSeparator?"\\.":t.thousandsSeparator,r=new RegExp("^-?[0-9]{1,3}(".concat(i,"[0-9]{3})*(").concat(n,"[0-9]+)?$")),l=new RegExp(i,"g");if(!r.test(a))return{valid:!1};i&&(a=a.replace(l,"")),n&&(a=a.replace(n,"."));var s=parseFloat(a);return{valid:!isNaN(s)&&isFinite(s)}}}},promise:function(){return{validate:function(e){return F(e.options.promise,[e])}}},regexp:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=e.options.regexp;if(t instanceof RegExp)return{valid:t.test(e.value)};var a=t.toString();return{valid:(e.options.flags?new RegExp(a,e.options.flags):new RegExp(a)).test(e.value)}}}},remote:function(){var e={crossDomain:!1,data:{},headers:{},method:"GET",validKey:"valid"};return{validate:function(t){if(""===t.value)return Promise.resolve({valid:!0});var a=Object.assign({},e,t.options),n=a.data;return"function"===typeof a.data&&(n=a.data.call(this,t)),"string"===typeof n&&(n=JSON.parse(n)),n[a.name||t.field]=t.value,L("function"===typeof a.url?a.url.call(this,t):a.url,{crossDomain:a.crossDomain,headers:a.headers,method:a.method,params:n}).then((function(e){return Promise.resolve({message:e.message,meta:e,valid:"true"==="".concat(e[a.validKey])})})).catch((function(e){return Promise.reject({valid:!1})}))}}},stringCase:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{case:"lower"},e.options),a=(t.case||"lower").toLowerCase();return{message:t.message||(e.l10n?"upper"===a?e.l10n.stringCase.upper:e.l10n.stringCase.default:t.message),valid:"upper"===a?e.value===e.value.toUpperCase():e.value===e.value.toLowerCase()}}}},stringLength:function(){return{validate:function(e){var t=Object.assign({},{message:"",trim:!1,utf8Bytes:!1},e.options),a=!0===t.trim||"true"==="".concat(t.trim)?e.value.trim():e.value;if(""===a)return{valid:!0};var n=t.min?"".concat(t.min):"",i=t.max?"".concat(t.max):"",r=t.utf8Bytes?function(e){for(var t=e.length,a=e.length-1;a>=0;a--){var n=e.charCodeAt(a);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&a--}return"".concat(t)}(a):a.length,l=!0,s=e.l10n?t.message||e.l10n.stringLength.default:t.message;switch((n&&r<parseInt(n,10)||i&&r>parseInt(i,10))&&(l=!1),!0){case!!n&&!!i:s=V(e.l10n?t.message||e.l10n.stringLength.between:t.message,[n,i]);break;case!!n:s=V(e.l10n?t.message||e.l10n.stringLength.more:t.message,"".concat(parseInt(n,10)-1));break;case!!i:s=V(e.l10n?t.message||e.l10n.stringLength.less:t.message,"".concat(parseInt(i,10)+1))}return{message:s,valid:l}}}},uri:function(){var e={allowEmptyProtocol:!1,allowLocal:!1,protocol:"http, https, ftp"};return{validate:function(t){if(""===t.value)return{valid:!0};var a=Object.assign({},e,t.options),n=!0===a.allowLocal||"true"==="".concat(a.allowLocal),i=!0===a.allowEmptyProtocol||"true"==="".concat(a.allowEmptyProtocol),r=a.protocol.split(",").join("|").replace(/\s/g,"");return{valid:new RegExp("^(?:(?:"+r+")://)"+(i?"?":"")+"(?:\\S+(?::\\S*)?@)?(?:"+(n?"":"(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})")+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+(n?"?":"")+")(?::\\d{2,5})?(?:/[^\\s]*)?$","i").test(t.value)}}}}},D=function(){function e(t,a){Object(f.a)(this,e),this.elements={},this.ee={fns:{},clear:function(){this.fns={}},emit:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];(this.fns[e]||[]).map((function(e){return e.apply(e,a)}))},off:function(e,t){if(this.fns[e]){var a=this.fns[e].indexOf(t);a>=0&&this.fns[e].splice(a,1)}},on:function(e,t){(this.fns[e]=this.fns[e]||[]).push(t)}},this.filter={filters:{},add:function(e,t){(this.filters[e]=this.filters[e]||[]).push(t)},clear:function(){this.filters={}},execute:function(e,t,a){if(!this.filters[e]||!this.filters[e].length)return t;for(var n=t,i=this.filters[e],r=i.length,l=0;l<r;l++)n=i[l].apply(n,a);return n},remove:function(e,t){this.filters[e]&&(this.filters[e]=this.filters[e].filter((function(e){return e!==t})))}},this.plugins={},this.results=new Map,this.validators={},this.form=t,this.fields=a}return Object(v.a)(e,[{key:"on",value:function(e,t){return this.ee.on(e,t),this}},{key:"off",value:function(e,t){return this.ee.off(e,t),this}},{key:"emit",value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(t=this.ee).emit.apply(t,[e].concat(n)),this}},{key:"registerPlugin",value:function(e,t){if(this.plugins[e])throw new Error("The plguin ".concat(e," is registered"));return t.setCore(this),t.install(),this.plugins[e]=t,this}},{key:"deregisterPlugin",value:function(e){var t=this.plugins[e];return t&&t.uninstall(),delete this.plugins[e],this}},{key:"registerValidator",value:function(e,t){if(this.validators[e])throw new Error("The validator ".concat(e," is registered"));return this.validators[e]=t,this}},{key:"registerFilter",value:function(e,t){return this.filter.add(e,t),this}},{key:"deregisterFilter",value:function(e,t){return this.filter.remove(e,t),this}},{key:"executeFilter",value:function(e,t,a){return this.filter.execute(e,t,a)}},{key:"addField",value:function(e,t){var a=Object.assign({},{selector:"",validators:{}},t);return this.fields[e]=this.fields[e]?{selector:a.selector||this.fields[e].selector,validators:Object.assign({},this.fields[e].validators,a.validators)}:a,this.elements[e]=this.queryElements(e),this.emit("core.field.added",{elements:this.elements[e],field:e,options:this.fields[e]}),this}},{key:"removeField",value:function(e){if(!this.fields[e])throw new Error("The field ".concat(e," validators are not defined. Please ensure the field is added first"));var t=this.elements[e],a=this.fields[e];return delete this.elements[e],delete this.fields[e],this.emit("core.field.removed",{elements:t,field:e,options:a}),this}},{key:"validate",value:function(){var e=this;return this.emit("core.form.validating"),this.filter.execute("validate-pre",Promise.resolve(),[]).then((function(){return Promise.all(Object.keys(e.fields).map((function(t){return e.validateField(t)}))).then((function(t){switch(!0){case-1!==t.indexOf("Invalid"):return e.emit("core.form.invalid"),Promise.resolve("Invalid");case-1!==t.indexOf("NotValidated"):return e.emit("core.form.notvalidated"),Promise.resolve("NotValidated");default:return e.emit("core.form.valid"),Promise.resolve("Valid")}}))}))}},{key:"validateField",value:function(e){var t=this,a=this.results.get(e);if("Valid"===a||"Invalid"===a)return Promise.resolve(a);this.emit("core.field.validating",e);var n=this.elements[e];if(0===n.length)return this.emit("core.field.valid",e),Promise.resolve("Valid");var i=n[0].getAttribute("type");return"radio"===i||"checkbox"===i||1===n.length?this.validateElement(e,n[0]):Promise.all(n.map((function(a){return t.validateElement(e,a)}))).then((function(a){switch(!0){case-1!==a.indexOf("Invalid"):return t.emit("core.field.invalid",e),t.results.set(e,"Invalid"),Promise.resolve("Invalid");case-1!==a.indexOf("NotValidated"):return t.emit("core.field.notvalidated",e),t.results.delete(e),Promise.resolve("NotValidated");default:return t.emit("core.field.valid",e),t.results.set(e,"Valid"),Promise.resolve("Valid")}}))}},{key:"validateElement",value:function(e,t){var a=this;this.results.delete(e);var n=this.elements[e];if(this.filter.execute("element-ignored",!1,[e,t,n]))return this.emit("core.element.ignored",{element:t,elements:n,field:e}),Promise.resolve("Ignored");var i=this.fields[e].validators;this.emit("core.element.validating",{element:t,elements:n,field:e});var r=Object.keys(i).map((function(n){return function(){return a.executeValidator(e,t,n,i[n])}}));return this.waterfall(r).then((function(i){var r=-1===i.indexOf("Invalid");a.emit("core.element.validated",{element:t,elements:n,field:e,valid:r});var l=t.getAttribute("type");return"radio"!==l&&"checkbox"!==l&&1!==n.length||a.emit(r?"core.field.valid":"core.field.invalid",e),Promise.resolve(r?"Valid":"Invalid")})).catch((function(i){return a.emit("core.element.notvalidated",{element:t,elements:n,field:e}),Promise.resolve(i)}))}},{key:"executeValidator",value:function(e,t,a,n){var i=this,r=this.elements[e],l=this.filter.execute("validator-name",a,[a,e]);if(n.message=this.filter.execute("validator-message",n.message,[this.locale,e,l]),!this.validators[l]||!1===n.enabled)return this.emit("core.validator.validated",{element:t,elements:r,field:e,result:this.normalizeResult(e,l,{valid:!0}),validator:l}),Promise.resolve("Valid");var s=this.validators[l],o=this.getElementValue(e,t,l);if(!this.filter.execute("field-should-validate",!0,[e,t,o,a]))return this.emit("core.validator.notvalidated",{element:t,elements:r,field:e,validator:a}),Promise.resolve("NotValidated");this.emit("core.validator.validating",{element:t,elements:r,field:e,validator:a});var c=s().validate({element:t,elements:r,field:e,l10n:this.localization,options:n,value:o});if("function"===typeof c.then)return c.then((function(n){var l=i.normalizeResult(e,a,n);return i.emit("core.validator.validated",{element:t,elements:r,field:e,result:l,validator:a}),l.valid?"Valid":"Invalid"}));var d=this.normalizeResult(e,a,c);return this.emit("core.validator.validated",{element:t,elements:r,field:e,result:d,validator:a}),Promise.resolve(d.valid?"Valid":"Invalid")}},{key:"getElementValue",value:function(e,t,a){var n=function(e,t,a,n){var i=(a.getAttribute("type")||"").toLowerCase();switch(a.tagName.toLowerCase()){case"textarea":return a.value;case"select":var r=a,l=r.selectedIndex;return l>=0?r.options.item(l).value:"";case"input":if("radio"===i||"checkbox"===i){var s=n.filter((function(e){return e.checked})).length;return 0===s?"":s+""}return a.value;default:return""}}(this.form,0,t,this.elements[e]);return this.filter.execute("field-value",n,[n,e,t,a])}},{key:"getElements",value:function(e){return this.elements[e]}},{key:"getFields",value:function(){return this.fields}},{key:"getFormElement",value:function(){return this.form}},{key:"getLocale",value:function(){return this.locale}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"updateFieldStatus",value:function(e,t,a){var n=this,i=this.elements[e],r=i[0].getAttribute("type");if(("radio"===r||"checkbox"===r?[i[0]]:i).forEach((function(i){return n.updateElementStatus(e,i,t,a)})),!a)switch(t){case"NotValidated":this.emit("core.field.notvalidated",e),this.results.delete(e);break;case"Validating":this.emit("core.field.validating",e),this.results.delete(e);break;case"Valid":this.emit("core.field.valid",e),this.results.set(e,"Valid");break;case"Invalid":this.emit("core.field.invalid",e),this.results.set(e,"Invalid")}return this}},{key:"updateElementStatus",value:function(e,t,a,n){var i=this,r=this.elements[e],l=this.fields[e].validators,s=n?[n]:Object.keys(l);switch(a){case"NotValidated":s.forEach((function(a){return i.emit("core.validator.notvalidated",{element:t,elements:r,field:e,validator:a})})),this.emit("core.element.notvalidated",{element:t,elements:r,field:e});break;case"Validating":s.forEach((function(a){return i.emit("core.validator.validating",{element:t,elements:r,field:e,validator:a})})),this.emit("core.element.validating",{element:t,elements:r,field:e});break;case"Valid":s.forEach((function(a){return i.emit("core.validator.validated",{element:t,field:e,result:{message:l[a].message,valid:!0},validator:a})})),this.emit("core.element.validated",{element:t,elements:r,field:e,valid:!0});break;case"Invalid":s.forEach((function(a){return i.emit("core.validator.validated",{element:t,field:e,result:{message:l[a].message,valid:!1},validator:a})})),this.emit("core.element.validated",{element:t,elements:r,field:e,valid:!1})}return this}},{key:"resetForm",value:function(e){var t=this;return Object.keys(this.fields).forEach((function(a){return t.resetField(a,e)})),this.emit("core.form.reset",{reset:e}),this}},{key:"resetField",value:function(e,t){if(t){var a=this.elements[e],n=a[0].getAttribute("type");a.forEach((function(e){"radio"===n||"checkbox"===n?(e.removeAttribute("selected"),e.removeAttribute("checked"),e.checked=!1):(e.setAttribute("value",""),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.value=""))}))}return this.updateFieldStatus(e,"NotValidated"),this.emit("core.field.reset",{field:e,reset:t}),this}},{key:"revalidateField",value:function(e){return this.updateFieldStatus(e,"NotValidated"),this.validateField(e)}},{key:"disableValidator",value:function(e,t){return this.toggleValidator(!1,e,t)}},{key:"enableValidator",value:function(e,t){return this.toggleValidator(!0,e,t)}},{key:"updateValidatorOption",value:function(e,t,a,n){return this.fields[e]&&this.fields[e].validators&&this.fields[e].validators[t]&&(this.fields[e].validators[t][a]=n),this}},{key:"destroy",value:function(){var e=this;return Object.keys(this.plugins).forEach((function(t){return e.plugins[t].uninstall()})),this.ee.clear(),this.filter.clear(),this.results.clear(),this.plugins={},this}},{key:"setLocale",value:function(e,t){return this.locale=e,this.localization=t,this}},{key:"waterfall",value:function(e){return e.reduce((function(e,t,a,n){return e.then((function(e){return t().then((function(t){return e.push(t),e}))}))}),Promise.resolve([]))}},{key:"queryElements",value:function(e){var t=this.fields[e].selector?"#"===this.fields[e].selector.charAt(0)?'[id="'.concat(this.fields[e].selector.substring(1),'"]'):this.fields[e].selector:'[name="'.concat(e,'"]');return[].slice.call(this.form.querySelectorAll(t))}},{key:"normalizeResult",value:function(e,t,a){var n=this.fields[e].validators[t];return Object.assign({},a,{message:a.message||(n?n.message:"")||(this.localization&&this.localization[t]&&this.localization[t].default?this.localization[t].default:"")||"The field ".concat(e," is not valid")})}},{key:"toggleValidator",value:function(e,t,a){var n=this,i=this.fields[t].validators;return a&&i&&i[a]?this.fields[t].validators[a].enabled=e:a||Object.keys(i).forEach((function(a){return n.fields[t].validators[a].enabled=e})),this.updateFieldStatus(t,"NotValidated",a)}}]),e}();var Y=function(){function e(t){Object(f.a)(this,e),this.opts=t}return Object(v.a)(e,[{key:"setCore",value:function(e){return this.core=e,this}},{key:"install",value:function(){}},{key:"uninstall",value:function(){}}]),e}(),T=function(e,t){var a=Object.assign({},{fields:{},locale:"en_US",plugins:{}},t),n=new D(e,a.fields);return n.setLocale(a.locale,a.localization),Object.keys(a.plugins).forEach((function(e){return n.registerPlugin(e,a.plugins[e])})),Object.keys(M).forEach((function(e){return n.registerValidator(e,M[e])})),Object.keys(a.fields).forEach((function(e){return n.addField(e,a.fields[e])})),n},R=a(1),z=a(2);function P(e,t){var a=[],n=[];Object.keys(t).forEach((function(e){e&&(t[e]?a.push(e):n.push(e))})),n.forEach((function(t){return function(e,t){t.split(" ").forEach((function(t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}))}(e,t)})),a.forEach((function(t){return function(e,t){t.split(" ").forEach((function(t){e.classList?e.classList.add(t):" ".concat(e.className," ").indexOf(" ".concat(t," "))&&(e.className+=" ".concat(t))}))}(e,t)}))}var _=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).icons=new Map,n.opts=Object.assign({},{invalid:"fv-plugins-icon--invalid",onPlaced:function(){},onSet:function(){},valid:"fv-plugins-icon--valid",validating:"fv-plugins-icon--validating"},e),n.elementValidatingHandler=n.onElementValidating.bind(Object(z.a)(n)),n.elementValidatedHandler=n.onElementValidated.bind(Object(z.a)(n)),n.elementNotValidatedHandler=n.onElementNotValidated.bind(Object(z.a)(n)),n.elementIgnoredHandler=n.onElementIgnored.bind(Object(z.a)(n)),n.fieldAddedHandler=n.onFieldAdded.bind(Object(z.a)(n)),n}return Object(v.a)(a,[{key:"install",value:function(){this.core.on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler)}},{key:"uninstall",value:function(){this.icons.forEach((function(e){return e.parentNode.removeChild(e)})),this.icons.clear(),this.core.off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler)}},{key:"onFieldAdded",value:function(e){var t=this,a=e.elements;a&&(a.forEach((function(e){var a=t.icons.get(e);a&&(a.parentNode.removeChild(a),t.icons.delete(e))})),this.prepareFieldIcon(e.field,a))}},{key:"prepareFieldIcon",value:function(e,t){var a=this;if(t.length){var n=t[0].getAttribute("type");"radio"===n||"checkbox"===n?this.prepareElementIcon(e,t[0]):t.forEach((function(t){return a.prepareElementIcon(e,t)}))}}},{key:"prepareElementIcon",value:function(e,t){var a=document.createElement("i");a.setAttribute("data-field",e),t.parentNode.insertBefore(a,t.nextSibling),P(a,{"fv-plugins-icon":!0});var n={classes:{invalid:this.opts.invalid,valid:this.opts.valid,validating:this.opts.validating},element:t,field:e,iconElement:a};this.core.emit("plugins.icon.placed",n),this.opts.onPlaced(n),this.icons.set(t,a)}},{key:"onElementValidating",value:function(e){var t,a=this.setClasses(e.field,e.element,e.elements,(t={},Object(R.a)(t,this.opts.invalid,!1),Object(R.a)(t,this.opts.valid,!1),Object(R.a)(t,this.opts.validating,!0),t)),n={element:e.element,field:e.field,iconElement:a,status:"Validating"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"onElementValidated",value:function(e){var t,a=this.setClasses(e.field,e.element,e.elements,(t={},Object(R.a)(t,this.opts.invalid,!e.valid),Object(R.a)(t,this.opts.valid,e.valid),Object(R.a)(t,this.opts.validating,!1),t)),n={element:e.element,field:e.field,iconElement:a,status:e.valid?"Valid":"Invalid"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"onElementNotValidated",value:function(e){var t,a=this.setClasses(e.field,e.element,e.elements,(t={},Object(R.a)(t,this.opts.invalid,!1),Object(R.a)(t,this.opts.valid,!1),Object(R.a)(t,this.opts.validating,!1),t)),n={element:e.element,field:e.field,iconElement:a,status:"NotValidated"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"onElementIgnored",value:function(e){var t,a=this.setClasses(e.field,e.element,e.elements,(t={},Object(R.a)(t,this.opts.invalid,!1),Object(R.a)(t,this.opts.valid,!1),Object(R.a)(t,this.opts.validating,!1),t)),n={element:e.element,field:e.field,iconElement:a,status:"Ignored"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"setClasses",value:function(e,t,a,n){var i=t.getAttribute("type"),r="radio"===i||"checkbox"===i?a[0]:t;if(this.icons.has(r)){var l=this.icons.get(r);return P(l,n),l}return null}}]),a}(Y),q=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(f.a)(this,a),(n=t.call(this,e)).handlers=[],n.timers=new Map,n.ieVersion=function(){for(var e=3,t=document.createElement("div"),a=t.all||[];t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><br><![endif]--\x3e",a[0];);return e>4?e:document.documentMode}();var i=document.createElement("div");return n.defaultEvent=9!==n.ieVersion&&"oninput"in i?"input":"keyup",n.opts=Object.assign({},{delay:0,event:n.defaultEvent,threshold:0},e),n.fieldAddedHandler=n.onFieldAdded.bind(Object(z.a)(n)),n.fieldRemovedHandler=n.onFieldRemoved.bind(Object(z.a)(n)),n}return Object(v.a)(a,[{key:"install",value:function(){this.core.on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function(){this.handlers.forEach((function(e){return e.element.removeEventListener(e.event,e.handler)})),this.handlers=[],this.timers.forEach((function(e){return window.clearTimeout(e)})),this.timers.clear(),this.core.off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"prepareHandler",value:function(e,t){var a=this;t.forEach((function(t){var n=[];switch(!0){case!!a.opts.event&&!1===a.opts.event[e]:n=[];break;case!!a.opts.event&&!!a.opts.event[e]:n=a.opts.event[e].split(" ");break;case"string"===typeof a.opts.event&&a.opts.event!==a.defaultEvent:n=a.opts.event.split(" ");break;default:var i=t.getAttribute("type"),r=t.tagName.toLowerCase();n=["radio"===i||"checkbox"===i||"file"===i||"select"===r?"change":a.ieVersion>=10&&t.getAttribute("placeholder")?"keyup":a.defaultEvent]}n.forEach((function(n){var i=function(n){return a.handleEvent(n,e,t)};a.handlers.push({element:t,event:n,field:e,handler:i}),t.addEventListener(n,i)}))}))}},{key:"handleEvent",value:function(e,t,a){var n=this;if(this.exceedThreshold(t,a)&&this.core.executeFilter("plugins-trigger-should-validate",!0,[t,a])){var i=function(){return n.core.validateElement(t,a).then((function(i){n.core.emit("plugins.trigger.executed",{element:a,event:e,field:t})}))},r=this.opts.delay[t]||this.opts.delay;if(0===r)i();else{var l=this.timers.get(a);l&&window.clearTimeout(l),this.timers.set(a,window.setTimeout(i,1e3*r))}}}},{key:"onFieldAdded",value:function(e){this.handlers.filter((function(t){return t.field===e.field})).forEach((function(e){return e.element.removeEventListener(e.event,e.handler)})),this.prepareHandler(e.field,e.elements)}},{key:"onFieldRemoved",value:function(e){this.handlers.filter((function(t){return t.field===e.field&&e.elements.indexOf(t.element)>=0})).forEach((function(e){return e.element.removeEventListener(e.event,e.handler)}))}},{key:"exceedThreshold",value:function(e,t){var a=0!==this.opts.threshold[e]&&0!==this.opts.threshold&&(this.opts.threshold[e]||this.opts.threshold);if(!a)return!0;var n=t.getAttribute("type");return-1!==["button","checkbox","file","hidden","image","radio","reset","submit"].indexOf(n)||this.core.getElementValue(e,t).length>=a}}]),a}(Y),B=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).isFormValid=!1,n.opts=Object.assign({},{aspNetButton:!1,selector:'[type="submit"]:not([formnovalidate])'},e),n.submitHandler=n.handleSubmitEvent.bind(Object(z.a)(n)),n.buttonClickHandler=n.handleClickEvent.bind(Object(z.a)(n)),n}return Object(v.a)(a,[{key:"install",value:function(){var e=this;if(this.core.getFormElement()instanceof HTMLFormElement){var t=this.core.getFormElement();this.selectorButtons=[].slice.call(t.querySelectorAll(this.opts.selector)),this.submitButtons=[].slice.call(t.querySelectorAll('[type="submit"]')),t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",this.submitHandler),this.hiddenClickedEle=document.createElement("input"),this.hiddenClickedEle.setAttribute("type","hidden"),t.appendChild(this.hiddenClickedEle),this.submitButtons.forEach((function(t){t.addEventListener("click",e.buttonClickHandler)}))}}},{key:"uninstall",value:function(){var e=this,t=this.core.getFormElement();t instanceof HTMLFormElement&&t.removeEventListener("submit",this.submitHandler),this.submitButtons.forEach((function(t){t.removeEventListener("click",e.buttonClickHandler)})),this.hiddenClickedEle.parentElement.removeChild(this.hiddenClickedEle)}},{key:"handleSubmitEvent",value:function(e){this.validateForm(e)}},{key:"handleClickEvent",value:function(e){var t=e.currentTarget;if(t instanceof HTMLElement&&-1!==this.selectorButtons.indexOf(t))if(this.opts.aspNetButton&&!0===this.isFormValid);else{this.core.getFormElement().removeEventListener("submit",this.submitHandler),this.clickedButton=e.target;var a=this.clickedButton.getAttribute("name"),n=this.clickedButton.getAttribute("value");a&&n&&(this.hiddenClickedEle.setAttribute("name",a),this.hiddenClickedEle.setAttribute("value",n)),this.validateForm(e)}}},{key:"validateForm",value:function(e){var t=this;e.preventDefault(),this.core.validate().then((function(e){"Valid"===e&&t.opts.aspNetButton&&!t.isFormValid&&t.clickedButton&&(t.isFormValid=!0,t.clickedButton.removeEventListener("click",t.buttonClickHandler),t.clickedButton.click())}))}}]),a}(Y);function $(e,t){var a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return a?a.call(e,t):[].slice.call(e.parentElement.querySelectorAll(t)).indexOf(e)>=0}function U(e,t){for(var a=e;a&&!$(a,t);)a=a.parentElement;return a}var Z=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).messages=new Map,n.defaultContainer=document.createElement("div"),n.opts=Object.assign({},{container:function(e,t){return n.defaultContainer}},e),n.elementIgnoredHandler=n.onElementIgnored.bind(Object(z.a)(n)),n.fieldAddedHandler=n.onFieldAdded.bind(Object(z.a)(n)),n.fieldRemovedHandler=n.onFieldRemoved.bind(Object(z.a)(n)),n.validatorValidatedHandler=n.onValidatorValidated.bind(Object(z.a)(n)),n.validatorNotValidatedHandler=n.onValidatorNotValidated.bind(Object(z.a)(n)),n}return Object(v.a)(a,[{key:"install",value:function(){this.core.getFormElement().appendChild(this.defaultContainer),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler).on("core.validator.validated",this.validatorValidatedHandler).on("core.validator.notvalidated",this.validatorNotValidatedHandler)}},{key:"uninstall",value:function(){this.core.getFormElement().removeChild(this.defaultContainer),this.messages.forEach((function(e){return e.parentNode.removeChild(e)})),this.messages.clear(),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler).off("core.validator.validated",this.validatorValidatedHandler).off("core.validator.notvalidated",this.validatorNotValidatedHandler)}},{key:"onFieldAdded",value:function(e){var t=this,a=e.elements;a&&(a.forEach((function(e){var a=t.messages.get(e);a&&(a.parentNode.removeChild(a),t.messages.delete(e))})),this.prepareFieldContainer(e.field,a))}},{key:"onFieldRemoved",value:function(e){var t=this;if(e.elements.length&&e.field){var a=e.elements[0].getAttribute("type");("radio"===a||"checkbox"===a?[e.elements[0]]:e.elements).forEach((function(e){if(t.messages.has(e)){var a=t.messages.get(e);a.parentNode.removeChild(a),t.messages.delete(e)}}))}}},{key:"prepareFieldContainer",value:function(e,t){var a=this;if(t.length){var n=t[0].getAttribute("type");"radio"===n||"checkbox"===n?this.prepareElementContainer(e,t[0],t):t.forEach((function(n){return a.prepareElementContainer(e,n,t)}))}}},{key:"prepareElementContainer",value:function(e,t,a){var n;switch(!0){case"string"===typeof this.opts.container:var i=this.opts.container;i="#"===i.charAt(0)?'[id="'.concat(i.substring(1),'"]'):i,n=this.core.getFormElement().querySelector(i);break;default:n=this.opts.container(e,t)}var r=document.createElement("div");n.appendChild(r),P(r,{"fv-plugins-message-container":!0}),this.core.emit("plugins.message.placed",{element:t,elements:a,field:e,messageElement:r}),this.messages.set(t,r)}},{key:"getMessage",value:function(e){return"string"===typeof e.message?e.message:e.message[this.core.getLocale()]}},{key:"onValidatorValidated",value:function(e){var t=e.elements,a=e.element.getAttribute("type"),n="radio"===a||"checkbox"===a?t[0]:e.element;if(this.messages.has(n)){var i=this.messages.get(n),r=i.querySelector('[data-field="'.concat(e.field,'"][data-validator="').concat(e.validator,'"]'));if(r||e.result.valid)r&&!e.result.valid?(r.innerHTML=this.getMessage(e.result),this.core.emit("plugins.message.displayed",{element:e.element,field:e.field,message:e.result.message,messageElement:r,meta:e.result.meta,validator:e.validator})):r&&e.result.valid&&i.removeChild(r);else{var l=document.createElement("div");l.innerHTML=this.getMessage(e.result),l.setAttribute("data-field",e.field),l.setAttribute("data-validator",e.validator),this.opts.clazz&&P(l,Object(R.a)({},this.opts.clazz,!0)),i.appendChild(l),this.core.emit("plugins.message.displayed",{element:e.element,field:e.field,message:e.result.message,messageElement:l,meta:e.result.meta,validator:e.validator})}}}},{key:"onValidatorNotValidated",value:function(e){var t=e.elements,a=e.element.getAttribute("type"),n="radio"===a||"checkbox"===a?t[0]:e.element;if(this.messages.has(n)){var i=this.messages.get(n),r=i.querySelector('[data-field="'.concat(e.field,'"][data-validator="').concat(e.validator,'"]'));r&&i.removeChild(r)}}},{key:"onElementIgnored",value:function(e){var t=e.elements,a=e.element.getAttribute("type"),n="radio"===a||"checkbox"===a?t[0]:e.element;if(this.messages.has(n)){var i=this.messages.get(n);[].slice.call(i.querySelectorAll('[data-field="'.concat(e.field,'"]'))).forEach((function(e){i.removeChild(e)}))}}}],[{key:"getClosestContainer",value:function(e,t,a){for(var n=e;n&&n!==t&&(n=n.parentElement,!a.test(n.className)););return n}}]),a}(Y),X=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(f.a)(this,a),t.call(this,Object.assign({},{eleInvalidClass:"validate invalid",eleValidClass:"validate valid",formClass:"fv-plugins-materialize",messageClass:"helper-text",rowInvalidClass:"fv-invalid-row",rowPattern:/^(.*)col(\s+)s[0-9]+(.*)$/,rowSelector:".row",rowValidClass:"fv-valid-row"},e))}return Object(v.a)(a,[{key:"onIconPlaced",value:function(e){var t=e.element.getAttribute("type"),a=e.element.parentElement;"checkbox"!==t&&"radio"!==t||(a.parentElement.insertBefore(e.iconElement,a.nextSibling),P(e.iconElement,{"fv-plugins-icon-check":!0}))}}]),a}(function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).results=new Map,n.containers=new Map,n.opts=Object.assign({},{defaultMessageContainer:!0,eleInvalidClass:"",eleValidClass:"",rowClasses:"",rowValidatingClass:""},e),n.elementIgnoredHandler=n.onElementIgnored.bind(Object(z.a)(n)),n.elementValidatingHandler=n.onElementValidating.bind(Object(z.a)(n)),n.elementValidatedHandler=n.onElementValidated.bind(Object(z.a)(n)),n.elementNotValidatedHandler=n.onElementNotValidated.bind(Object(z.a)(n)),n.iconPlacedHandler=n.onIconPlaced.bind(Object(z.a)(n)),n.fieldAddedHandler=n.onFieldAdded.bind(Object(z.a)(n)),n.fieldRemovedHandler=n.onFieldRemoved.bind(Object(z.a)(n)),n}return Object(v.a)(a,[{key:"install",value:function(){var e,t=this;P(this.core.getFormElement(),(e={},Object(R.a)(e,this.opts.formClass,!0),Object(R.a)(e,"fv-plugins-framework",!0),e)),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("plugins.icon.placed",this.iconPlacedHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler),this.opts.defaultMessageContainer&&this.core.registerPlugin("___frameworkMessage",new Z({clazz:this.opts.messageClass,container:function(e,a){var n=U(a,"string"===typeof t.opts.rowSelector?t.opts.rowSelector:t.opts.rowSelector(e,a));return Z.getClosestContainer(a,n,t.opts.rowPattern)}}))}},{key:"uninstall",value:function(){var e;this.results.clear(),this.containers.clear(),P(this.core.getFormElement(),(e={},Object(R.a)(e,this.opts.formClass,!1),Object(R.a)(e,"fv-plugins-framework",!1),e)),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("plugins.icon.placed",this.iconPlacedHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"onIconPlaced",value:function(e){}},{key:"onFieldAdded",value:function(e){var t=this,a=e.elements;a&&(a.forEach((function(e){var a,n=t.containers.get(e);n&&(P(n,(a={},Object(R.a)(a,t.opts.rowInvalidClass,!1),Object(R.a)(a,t.opts.rowValidatingClass,!1),Object(R.a)(a,t.opts.rowValidClass,!1),Object(R.a)(a,"fv-plugins-icon-container",!1),a)),t.containers.delete(e))})),this.prepareFieldContainer(e.field,a))}},{key:"onFieldRemoved",value:function(e){var t=this;e.elements.forEach((function(e){var a,n=t.containers.get(e);n&&P(n,(a={},Object(R.a)(a,t.opts.rowInvalidClass,!1),Object(R.a)(a,t.opts.rowValidatingClass,!1),Object(R.a)(a,t.opts.rowValidClass,!1),a))}))}},{key:"prepareFieldContainer",value:function(e,t){var a=this;if(t.length){var n=t[0].getAttribute("type");"radio"===n||"checkbox"===n?this.prepareElementContainer(e,t[0]):t.forEach((function(t){return a.prepareElementContainer(e,t)}))}}},{key:"prepareElementContainer",value:function(e,t){var a,n=U(t,"string"===typeof this.opts.rowSelector?this.opts.rowSelector:this.opts.rowSelector(e,t));n!==t&&(P(n,(a={},Object(R.a)(a,this.opts.rowClasses,!0),Object(R.a)(a,"fv-plugins-icon-container",!0),a)),this.containers.set(t,n))}},{key:"onElementValidating",value:function(e){var t,a=e.elements,n=e.element.getAttribute("type"),i="radio"===n||"checkbox"===n?a[0]:e.element,r=this.containers.get(i);r&&P(r,(t={},Object(R.a)(t,this.opts.rowInvalidClass,!1),Object(R.a)(t,this.opts.rowValidatingClass,!0),Object(R.a)(t,this.opts.rowValidClass,!1),t))}},{key:"onElementNotValidated",value:function(e){this.removeClasses(e.element,e.elements)}},{key:"onElementIgnored",value:function(e){this.removeClasses(e.element,e.elements)}},{key:"removeClasses",value:function(e,t){var a,n=e.getAttribute("type"),i="radio"===n||"checkbox"===n?t[0]:e;P(i,(a={},Object(R.a)(a,this.opts.eleValidClass,!1),Object(R.a)(a,this.opts.eleInvalidClass,!1),a));var r,l=this.containers.get(i);l&&P(l,(r={},Object(R.a)(r,this.opts.rowInvalidClass,!1),Object(R.a)(r,this.opts.rowValidatingClass,!1),Object(R.a)(r,this.opts.rowValidClass,!1),r))}},{key:"onElementValidated",value:function(e){var t,a=this,n=e.elements,i=e.element.getAttribute("type"),r="radio"===i||"checkbox"===i?n[0]:e.element;P(r,(t={},Object(R.a)(t,this.opts.eleValidClass,e.valid),Object(R.a)(t,this.opts.eleInvalidClass,!e.valid),t));var l=this.containers.get(r);if(l)if(e.valid){this.results.delete(r);var s,o=!0;if(this.containers.forEach((function(e,t){e===l&&!1===a.results.get(t)&&(o=!1)})),o)P(l,(s={},Object(R.a)(s,this.opts.rowInvalidClass,!1),Object(R.a)(s,this.opts.rowValidatingClass,!1),Object(R.a)(s,this.opts.rowValidClass,!0),s))}else{var c;this.results.set(r,!1),P(l,(c={},Object(R.a)(c,this.opts.rowInvalidClass,!0),Object(R.a)(c,this.opts.rowValidatingClass,!1),Object(R.a)(c,this.opts.rowValidClass,!1),c))}}}]),a}(Y)),J=a(20),G=a.n(J),K=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return i.a.createElement("form",{id:"demoForm",method:"POST"},i.a.createElement("div",{className:"container fluid"},i.a.createElement("div",null,i.a.createElement(s.b,{to:"/"},i.a.createElement("h5",null,"Retour"))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-sm-3 col-form-label"},"Pr\xe9nom"),i.a.createElement("div",{className:"col-sm-9"},i.a.createElement("input",{type:"text",className:"form-control",name:"firstName"}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-sm-3 col-form-label"},"Nom"),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("input",{type:"text",className:"form-control",name:"lastName"}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-sm-3 col-form-label"},"date de naissance"),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"DD/MM/YYYY",name:"birthDate"}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-sm-3 col-form-label"},"examen"),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("select",{className:"browser-default custom-select",name:"examen"},i.a.createElement("option",null,"Choisir une option"),i.a.createElement("option",{value:"IRM"},"IRM"),i.a.createElement("option",{value:"Scanner"},"Scanner")))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-sm-3 col-form-label"},"dateExamen"),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"DD/MM/YYYY",name:"dateExamen"}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-sm-3 col-form-label"},"num\xe9ro de t\xe9l\xe9phone"),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("input",{type:"text",className:"form-control",name:"phoneNumber"}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-sm-3 col-form-label"},"ordonnance"),i.a.createElement("div",{className:"col-sm-5"},i.a.createElement("input",{type:"file",className:"form-control",name:"imageOrdo"}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:"col-sm-9 offset-sm-3"},i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))))}},{key:"componentDidMount",value:function(){this.fv=T(document.getElementById("demoForm"),{fields:{firstName:{validators:{notEmpty:{message:"Le pr\xe9nom est requis"},stringLength:{min:2,max:30,message:"Le pr\xe9nom doit comporter entre 2 et 30"},regexp:{regexp:/^[a-zA-Z0-9_-]+$/,message:"uniquement des lettres, chiffres, trait d'union et underscore"}}},lastName:{validators:{notEmpty:{message:"Le nom est requis"},stringLength:{min:2,max:30,message:"Le pr\xe9nom doit comporter entre 2 et 30 lettres"},regexp:{regexp:/^[a-zA-Z0-9_-]+$/,message:"uniquement des lettres, chiffres, trait d'union et underscore"}}},birthDate:{validators:{date:{format:"DD/MM/YYYY",message:"la valeur n'est pas une date valide"}}},dateExamen:{validators:{date:{format:"DD/MM/YYYY",message:"la valeur nest pas une date valide"}}},phoneNumber:{validators:{phone:{country:"FR",message:"Entrez un num\xe9ro valide"}}},imageOrdo:{validators:{notEmpty:{message:"SVP s\xe9lectionner une image"},file:{extension:"jpeg,jpg,png,pdf",type:"image/jpeg,image/png, application/pdf",maxSize:3145728,message:"le fichier choisi n'est pas valide"}}}},plugins:{trigger:new q,materialize:new X,submitButton:new B,icon:new _({valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"})}}).on("core.form.valid",(function(){var e=document.querySelector("form"),t=new XMLHttpRequest,a=new FormData,n={},i=e.querySelector('[name="firstName"]'),r=e.querySelector('[name="lastName"]'),l=e.querySelector('[name="birthDate"]'),s=e.querySelector('[name="examen"]'),o=e.querySelector('[name="dateExamen"]'),c=e.querySelector('[name="phoneNumber"]'),d=e.querySelector('[name="imageOrdo"]');n[i.name]=i.value,n[r.name]=r.value;var u=G()(l.value,"DD/MM/YYYY").format("MM/DD/YYYY");console.log(u),n[l.name]=G()(u,"dd, MM Do YYYY"),n[s.name]=s.value;var m=G()(o.value,"DD/MM/YYYY").format("MM/DD/YYYY");if(console.log(m),n[o.name]=G()(m,"dd, MM Do YYYY"),n[c.name]=c.value,a.append("data",JSON.stringify(n)),1===d.files.length){var f=d.files[0],v=(new Date).getTime()+f.name;a.append("files.imageOrdo",f,v)}else for(var h=0;h<d.files.length;h++){var p=d.files[h],g=(new Date).getTime()+p.name;a.append("files.imageOrdo",p,g)}var b,E=Object(A.a)(a);try{for(E.s();!(b=E.n()).done;){var y=b.value;console.log(y)}}catch(O){E.e(O)}finally{E.f()}t.open("POST","https://frozen-dawn-43758.herokuapp.com/ordonnances"),t.send(a),document.getElementById("demoForm").reset()}))}}]),a}(i.a.Component),W=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.component;return localStorage.getItem("jwt")?i.a.createElement(e,null):i.a.createElement(o.a,{to:{pathname:"/login"}})}}]),a}(i.a.Component),Q=function(){return i.a.createElement("div",{className:"center"},i.a.createElement("h1",null,"Le contenu de cette page est prot\xe9g\xe9e mais accessible puisque vous \xeates identifi\xe9"),i.a.createElement(s.b,{to:"/",className:"waves-effect waves-teal btn-flat"},"Retourner \xe0 l'accueil"))},ee=Object(n.createContext)(null),te=function(e){var t=e.children,a=Object(n.useState)(null),r=Object(E.a)(a,2),l=r[0],s=r[1];return i.a.createElement(ee.Provider,{value:{user:l,setUser:s}},t)},ae=function(e){var t=e.history,a=Object(n.useState)(""),r=Object(E.a)(a,2),l=r[0],s=r[1],o=Object(n.useState)(""),c=Object(E.a)(o,2),d=c[0],f=c[1],v=Object(n.useState)(""),h=Object(E.a)(v,2),p=h[0],g=h[1],b=Object(n.useState)("Loading..."),y=Object(E.a)(b,2),O=y[0],w=y[1],k=Object(n.useContext)(ee),j=k.user,N=k.setUser;console.log("user",j),Object(n.useEffect)((function(){j&&t.push("/")}),[]);var x=function(){var e=Object(m.a)(u.a.mark((function e(a){var n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,fetch("https://frozen-dawn-43758.herokuapp.com/auth/local/",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({identifier:l,password:d})});case 4:return n=e.sent,e.next=7,n.json();case 7:if(i=e.sent,console.log("data",i),!i.message){e.next=12;break}return g(i.message[0].messages[0].message),e.abrupt("return");case 12:N(i.user.username),localStorage.setItem("jwt",i.jwt),localStorage.setItem("username",i.user.username),w("You have been successfully logged in. You will be redirected in a few seconds..."),setTimeout((function(){return t.push("/protected")}),3e3),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),g("Something went wrong "+e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("h2",null,"Login"),i.a.createElement("h5",null,"Vous devez vous connecter pour acc\xe9der aux pages prot\xe9g\xe9es"),i.a.createElement("form",{className:"col s12",onSubmit:x},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col m8 s12 "},i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{className:"validate",type:"email",value:l,onChange:function(e){g(""),s(e.target.value)}}),i.a.createElement("label",{htmlFor:"email"},"Email")),i.a.createElement("div",{className:"input-field"},i.a.createElement("input",{className:"validate",type:"password",value:d,onChange:function(e){g(""),f(e.target.value)}}),i.a.createElement("label",{htmlFor:"password"},"Password")),i.a.createElement("button",null,"Login"))))),"  ",p&&i.a.createElement("p",null,p),i.a.createElement("p",null,O))},ne=function(){return i.a.createElement("nav",null,i.a.createElement("div",{className:"nav-wrapper"},i.a.createElement(s.c,{style:{paddingLeft:10},className:"brand-logo hide-on-small-only",to:"/",exact:!0}," Logo "),i.a.createElement("ul",{id:"nav-mobile",className:"right"},i.a.createElement("li",null,i.a.createElement(s.c,{to:"/",exact:!0}," Home ")),i.a.createElement("li",null,i.a.createElement(s.c,{to:"/protected",exact:!0}," Page prot\xe9g\xe9e ")),i.a.createElement("li",null," ",i.a.createElement(s.c,{to:"/login",exact:!0}," Login ")),i.a.createElement("li",null," ",i.a.createElement(s.c,{to:"/logout",exact:!0}," Logout ")))))},ie=function(e){var t=e.history,a=Object(n.useState)(""),r=Object(E.a)(a,2),l=r[0],s=r[1],o=Object(n.useContext)(ee),c=(o.user,o.setUser);return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("h2",null,"Logout"),i.a.createElement("button",{className:"btn btn-primary",onClick:function(){c(null),localStorage.removeItem("jwt"),localStorage.removeItem("username"),s("vous \xeates d\xe9connect\xe9; vous allez \xeatre redirig\xe9 vers la page principale..."),setTimeout((function(){return t.push("/")}),3e3)}},"Logout")),"  ",i.a.createElement("p",null,l))},re=function(){return i.a.createElement(s.a,null,i.a.createElement("div",null,i.a.createElement(ne,null),i.a.createElement(o.d,null,i.a.createElement(o.b,{exact:!0,path:"/",component:O}),i.a.createElement(o.b,{exact:!0,path:"/login",component:ae}),i.a.createElement(o.b,{exact:!0,path:"/logout",component:ie}),i.a.createElement(o.b,{exact:!0,path:"/ordonnances",component:O}),i.a.createElement(o.b,{exact:!0,path:"/ordonnance/add",component:K}),i.a.createElement(o.b,{path:"/ordonnances/:id",component:S}),i.a.createElement(W,{path:"/protected",component:Q}),i.a.createElement(o.b,{component:c}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(te,null,i.a.createElement(re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.d3192686.chunk.js.map